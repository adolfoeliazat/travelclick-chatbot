<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Untitled</title>
        <link rel="stylesheet/less" type="text/css" href="css/styles.less">
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,400italic' rel='stylesheet' type='text/css' />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/json-formatter/0.6.0/json-formatter.min.css" rel="stylesheet" type="text/css" />
        <link href="https://cdnjs.cloudflare.com/ajax/libs/pikaday/1.4.0/css/pikaday.min.css" rel="stylesheet" type="text/css" />
    </head>
    <body ng-app="chatbot" ng-controller="chatCtrl">
        
       

    	<div id="header">
    	<div class="center">
    		TravelClick Chatbot Assistant

    		<div class="comment">Book a hotel, ask for room information, directions or directly contact the hotel.</div>
    	</div>
    	</div>

    	<div class="center">
    		<ul id="chat">
    		  <li class="bot msg">
                Hey, I am a chatbot. <br />
                Let me know if you need help with any of the following:
                    <ul>
                        <li>Booking a room</li>
                        <li>Ask information about the hotel and our rooms</li>
                        <li>Ask about availability</li>
                        <li>Get our address or directions</li>
                        <li>Contact the hotel</li>
                    </ul>
              </li>

    		  <li ng-controller="msgCtrl" ng-repeat="msg in messages" class="{{msg.owner}} {{msg.type}}">
                <span ng-click="msg.showAnalysis = !msg.showAnalysis" ng-show="msg.type == 'msg' || msg.type == 'prompt'">
                    {{msg.text}}
                </span>

                <json-formatter ng-show="msg.owner == 'user' && msg.showAnalysis" json="msg.analysis" open="5"></json-formatter>

                <span ng-show="msg.type == 'setRoomType'">
                <ul>
                    <li ng-repeat="room in msg.rooms track by $index">
                        <img ng-src="{{room.picture}}" /><br />

                        {{room.roomName}}<br />

                        <button ng-click="setRoomType(room.roomCode, room.roomName)">
                            Choose
                        </button>
                    </li>
                </ul>
                </span>

                <div class="map" ng-show="msg.type == 'location' || msg.type == 'directions'"></div>

                <div ng-show="msg.type == 'availability'" class="calendar">
                    <a class="previous">&#x2039;</a>
                    <table cellspacing="0">
                    <thead>
                        <tr>
                            <td>Sun</td>
                            <td>Mon</td>
                            <td>Tue</td>
                            <td>Wed</td>
                            <td>Th</td>
                            <td>Fri</td>
                            <td>Sat</td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="dayRange in dayRanges track by $index">
                            <!-- <td>{{dayRange}}</td> -->
                            <td ng-repeat="day in dayRange track by $index" class="{{day.class}}">{{day.num}}</td>
                        </tr>
                    </tbody>
                    </table>
                    <a class="next">&#x203A;</a>
                </div>
                
                <ul ng-show="msg.type == 'rooms'" class="rooms">
                    <li ng-repeat="room in msg.rooms">
                    <div>{{room.roomTypeName}}</div>
                    <img src="http://placehold.it/150x120" />
                    <div>for {{room.maxOccupancy}} people</div>
                    </li>
                </ul>

                <div ng-show="msg.type == 'directions-steps'" class="steps">
                    <div ng-repeat="step in msg.steps">
                        <span style="position: relative; margin-right: 19px;"><i class="adp-maneuver adp-{{step.maneuver}}"></i></span>
                        <span ng-bind-html="step.instructions | unsafe"></span>
                    </div>
                </div>

                <span ng-show="msg.type == 'setDates'">
                [IMAGINARY CALENDAR] <br />

                <button ng-click="setDates()">Choose February 2nd to February 5th for now</button>
                </span>
              </li>
            </ul>
            
    	</div>


    	<div class="center">
        <form ng-submit="addMessage(this)">
    	   <input type="text" ng-model="newMessage" ng-disabled="disabled" id="new-message" placeholder="Send a message..." />
        </form>
    	</div>

        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/less.js/2.7.1/less.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/json-formatter/0.6.0/json-formatter.min.js"></script>
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbVQPyu3rG6eRovOO8PfXH5hHCktvtHyk">
        </script>
        <script src="js/api-ai/target/api.ai.min.js"></script>

        <script src="js/app.js"></script>
    </body>
</html>